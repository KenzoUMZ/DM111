{
	"info": {
		"_postman_id": "84f95b04-22ef-4037-8a5e-84ecedb0fb71",
		"name": "ValeFood",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "20266117"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Authentication",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"restaurantUserToken\", jsonData[\"token\"]);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"edilson@inatel.br\",\n    \"password\": \"admin\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{vfa-host}}/valefood/auth"
					},
					"response": []
				}
			]
		},
		{
			"name": "Restaurants",
			"item": [
				{
					"name": "Create restaurant",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"restaurantId\", jsonData[\"id\"]);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Token",
								"value": "{{restaurantUserToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Brazuca\",\n    \"address\": \"Av. São João, 1\",\n    \"userId\": \"{{restaurantUserId}}\",\n    \"categories\": [\n        \"pizza\",\n        \"burguer\"\n    ],\n    \"products\": [\n        {\n            \"name\": \"Marguerita\",\n            \"description\": \"Pizza de Marguerita\",\n            \"category\": \"pizza\",\n            \"price\": 55\n        },\n        {\n            \"name\": \"X-Tudo\",\n            \"description\": \"X-Tudo Completo\",\n            \"category\": \"burguer\",\n            \"price\": 28\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{vfr-host}}/valefood/restaurants"
					},
					"response": []
				},
				{
					"name": "List restaurants",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{restaurantUserToken}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							},
							{
								"key": "Token",
								"value": "{{restaurantUserToken}}",
								"type": "text"
							}
						],
						"url": "{{vfr-host}}/valefood/restaurants"
					},
					"response": []
				},
				{
					"name": "List restaurant",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{vfr-host}}/valefood/restaurants/{{restaurantId}}"
					},
					"response": []
				},
				{
					"name": "Update restaurant",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Brazuca\",\n    \"address\": \"Av. São João, 1\",\n    \"userId\": \"{{restaurantUserId}}\",\n    \"categories\": [\n        \"pizza\",\n        \"burguer\"\n    ],\n    \"products\": [\n        {\n            \"name\": \"Marguerita\",\n            \"description\": \"Pizza de Marguerita\",\n            \"category\": \"pizza\",\n            \"price\": 55\n        },\n        {\n            \"name\": \"X-Tudo\",\n            \"description\": \"X-Tudo Completo\",\n            \"category\": \"burguer\",\n            \"price\": 28\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{vfr-host}}/valefood/restaurants/{{restaurantId}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Create regular user",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"regularUserId\", jsonData[\"id\"]);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Edilson\",\n    \"email\": \"edilson@gmail.com\",\n    \"password\": \"admin\",\n    \"type\": \"REGULAR\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{vfu-host}}/valefood/users"
					},
					"response": []
				},
				{
					"name": "Create restaurant user",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"restaurantUserId\", jsonData[\"id\"]);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Edilson R\",\n    \"email\": \"edilson.restaurant@gmail.com\",\n    \"password\": \"admin\",\n    \"type\": \"RESTAURANT\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{vfu-host}}/valefood/users"
					},
					"response": []
				},
				{
					"name": "List users",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{vfu-host}}/valefood/users"
					},
					"response": []
				},
				{
					"name": "List user",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{vfu-host}}/valefood/users/{{regularUserId}}"
					},
					"response": []
				},
				{
					"name": "Update user",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Edilson\",\n    \"email\": \"edilson@gmail.com\",\n    \"password\": \"admin\",\n    \"type\": \"REGULAR\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{vfr-host}}/valefood/users/{{regularUserId}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "Promotions",
			"item": [
				{
					"name": "List all promotions",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{vfp-host}}/promotions"
					},
					"response": []
				},
				{
					"name": "List promotions by category",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{vfp-host}}/promotions/by-categories?categories=cat1&categories=cat2",
							"host": [
								"{{vfp-host}}"
							],
							"path": [
								"promotions",
								"by-categories"
							],
							"query": [
								{
									"key": "categories",
									"value": "cat1"
								},
								{
									"key": "categories",
									"value": "cat2"
								}
							]
						}
					},
					"response": []
				},
				   {
					   "name": "Create promotion",
					   "request": {
						   "method": "POST",
						   "header": [
							   {
								   "key": "Content-Type",
								   "value": "application/json"
							   },
							   {
								   "key": "Token",
								   "value": "{{restaurantUserToken}}"
							   }
						   ],
						   "body": {
							   "mode": "raw",
							   "raw": "{\n  \"title\": \"Promoção X\",\n  \"description\": \"Descrição da promoção\",\n  \"categories\": [\"cat1\", \"cat2\"],\n  \"restaurantId\": 1,\n  \"price\": 19.99\n}"
						   },
						   "url": {
							   "raw": "{{vfp-host}}/promotions",
							   "host": [
								   "{{vfp-host}}"
							   ],
							   "path": [
								   "promotions"
							   ]
						   }
					   },
					   "response": []
				   },
				{
					"name": "Get promotion by id",
					"request": {
						"method": "GET",
						"header": [],
						"url": "{{vfp-host}}/promotions/1"
					},
					"response": []
				},
				   {
					   "name": "Update promotion",
					   "request": {
						   "method": "PUT",
						   "header": [
							   {
								   "key": "Content-Type",
								   "value": "application/json"
							   },
							   {
								   "key": "Token",
								   "value": "{{restaurantUserToken}}"
							   }
						   ],
						   "body": {
							   "mode": "raw",
							   "raw": "{\n  \"title\": \"Promoção Atualizada\",\n  \"description\": \"Nova descrição\",\n  \"categories\": [\"cat1\"],\n  \"restaurantId\": 1,\n  \"price\": 15.99\n}"
						   },
						   "url": {
							   "raw": "{{vfp-host}}/promotions/1",
							   "host": [
								   "{{vfp-host}}"
							   ],
							   "path": [
								   "promotions",
								   "1"
							   ]
						   }
					   },
					   "response": []
				   },
				   {
					   "name": "Delete promotion",
					   "request": {
						   "method": "DELETE",
						   "header": [
							   {
								   "key": "Token",
								   "value": "{{restaurantUserToken}}"
							   }
						   ],
						   "url": {
							   "raw": "{{vfp-host}}/promotions/1",
							   "host": [
								   "{{vfp-host}}"
							   ],
							   "path": [
								   "promotions",
								   "1"
							   ]
						   }
					   },
					   "response": []
				   }
			]
		}
	]
}